<script type="text/javascript">
    TextComponent = function (elementDestination){
        if (!window.hasOwnProperty("globalTextComponentModel"))
            window.globalTextComponentModel = null;
        this._newElement = null;
        this._title = null;
        this._text = null;
        this._baseLine = null;

        this.start = function(){
            if (window.globalTextComponentModel == null)
            {
                console.log("novo");
                window.globalTextComponentModel = $(".TextComponent").elements[0];
                //reset default properties
                window.globalTextComponentModel.style.display = "block";
                //remove the model from html
                window.globalTextComponentModel.parentNode.removeChild(window.globalTextComponentModel);
            }
            
            //clone thte
            this._newElement = window.globalTextComponentModel.cloneNode(true);
            //add the new element to elementDestination
            elementDestination.appendChild(this._newElement);

            //take elements from html

            this._title = $(this._newElement).$(".TextComponent_Title").elements[0];
            this._text = $(this._newElement).$(".TextComponent_Input").elements[0];
            this._baseLine = $(this._newElement).$(".TextComponent_BaseLine").elements[0];
        };

        this.setMainColor = function(mainColor)
        {
            this._title.style.color = mainColor;

            $(this._baseLine).animate(100, 0, 200, function(c){
                this.setProperty("style.width", c + "%");
                this.setProperty("style.marginLeft", ((100-c)/2) + "%");
            }, function(){
                this.setProperty("style.background", mainColor);
                this.animate(0, 100, 200, function(c){
                    this.setProperty("style.width", c + "%");
                    this.setProperty("style.marginLeft", ((100-c)/2) + "%");
                });
            });

        };

        this.setTextColor = function(textColor)
        {
            this._text.style.color = mainColor;
        };

        this.setTitle = function(newTitle){
            this._title.innerHTML = newTitle;
        };

        this.setValue = function(newValue){
            this._text.value = newValue;
        };

        this.getValue = function(){
            return this._text.value;
        };

        this.getElement = function(){
            return this._newElement;
        };

        this.start();
    };

</script>
<style type="text/css">
    .TextComponent{
        position:relative;
        font-family: arial, tahoma, sans-serif;
    }

    .TextComponent_Title{
        font-size:14px;
    }

    .TextComponent_Input{
        margin-top:5px;
        width: 100%;
        border:0px;
        font-size:20px;
        margin-left:10px;
    }

    .TextComponent_BaseLine{
        width:100%;
        height:1px;
        background:#000;
        margin-top:2px;
    }


</style>

<div class="TextComponent" style="display:none">
    <div class="TextComponent_Title">
        Titulo de teste
    </div>
    <input type="text" class="TextComponent_Input"/>
    <div class="TextComponent_BaseLine"></div>

</div>